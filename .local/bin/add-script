#!/bin/sh

# Check that there is only one argument
[ "$#" -ne 1 ] && echo "ERROR: Incorrect argument count (should be only one)" && exit 1

# Check that the script doesn't already exist
command -v "$1" >/dev/null 2>&1 && echo "ERROR: The script '$1' already exists" && exit 1

# Sets the script's location accorging to it's name (prefix)
{ expr "$1" : 'sb-*' 1>/dev/null && DIR="$HOME/.local/bin/statusbar" ;} || DIR="$HOME/.local/bin"

# Writes the script, checks it and makes it executable
"$EDITOR" "$DIR/$1" && chmod u+x "$DIR/$1" && shellcheck "$DIR/$1"
