#!/bin/sh

file="$(readlink -f "$1")"
dir="${file%/*}"
filename="$(echo "$file" | rev | cut -d '/' -f 1 | rev)"
filenameNoExt="${filename%.*}"
ext="${file##*.}"

case "$ext" in
    java) java -cp "$dir" "$filenameNoExt" ;;
    cpp) "$dir/$filenameNoExt" ;;
    c) "$dir/$filenameNoExt" ;;
    py) python3 "$filename" || "$filename";;
    tex|ms) setsid -f xdg-open "$filenameNoExt.pdf" ;;
    lisp) clisp "$filename" ;;
    *) "$dir/$filename" ;;
esac
