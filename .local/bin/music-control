#!/bin/sh

[ ! "$1" = "notify" ] && mpc "$1" >/dev/null 2>&1

status="$(mpc | head -n 2 | tail -n 1 | cut -d '[' -f2 | cut -d ']' -f1)"

song="$(mpc -f '%title%' | head -n 1)"
if [ -z "$song" ]; then
    f1="$(mpc -f '%file%' | head -n 1)"
    f2="${f1##*/}"
    song="${f2%.*}"
else
    song="$(mpc -f '%title% (%album%) - %artist%' | head -n 1)"
fi

case "$status" in
    "playing") notify 3000 "$song" ;;
esac
