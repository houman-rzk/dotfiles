#!/bin/sh

# A dmenu wrapper script for system functions.
case "$(readlink -f /sbin/init)" in
	*systemd*) ctl='systemctl' ;;
	*) ctl='loginctl' ;;
esac

case "$(printf " lock\n logout\n reboot\n shutdown\n⏾ sleep" | dmenu -i -n -p 'Action: ')" in
	' lock') mpc pause >/dev/null 2>&1 ; slock ; remaps ; update-dwmblocks & ;;
	' logout') kill -9 -1 ;;
	'⏾ sleep') mpc pause >/dev/null 2>&1 ; slock $ctl suspend -i ; rfkill unblock wifi ; remaps ; update-dwmblocks & ;;
	' reboot') sudo reboot ;;
	' shutdown') sudo shutdown -P now ;;
	*) exit 1 ;;
esac
